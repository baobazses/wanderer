/*! wanderer v0.0.0 | (c) 2015 @engy | https://github.com/engyii/wanderer | license MIT */
!function(n,e){"function"==typeof define&&define.amd?define(["signals"],e):"object"==typeof exports?module.exports=e(require("signals")):n.wanderer=e(n.signals)}(this,function(n){"use strict";function e(){var n=window.location.pathname+window.location.search;try{return s.raw?n:decodeURIComponent(n)}catch(e){return n}}function i(n){if(a!==n){var e=a;a=n,s.changed.dispatch(n,e)}}function t(){var n=e();n!==a&&i(n)}var o,a,s,d=n.Signal,r=window.history,s={stopped:new d,initialized:new d,changed:new d,raw:!1,isActive:function(){return o},init:function(){o||(a=e(),window.addEventListener("popstate",t),o=!0,s.initialized.dispatch(a))},stop:function(){o&&(window.removeListener("popstate",t),o=!1,s.stopped.dispatch(a))},setURL:function(n){n!==a&&(i(n),n===a&&(s.raw||(n=encodeURI(n)),r.pushState(null,null,n)))},replaceURL:function(n){n!==a&&(i(n),n===a&&(s.raw||(n=encodeURI(n)),r.replaceState(null,null,n)))},dispose:function(){s.stop(),s.initialized.dispose(),s.stopped.dispose(),s.changed.dispose(),s=null}};return s.initialized.memorize=!0,s});